<div class="pantalla-completa">
    <div class="ancho">
        <h1 class="text-center">
            {{ accion }} Almac&eacute;n
        </h1>
        <hr/>
        <div class="mt-2" *ngIf="agregar">
            <div class="row">
                <div class="d-flex col-lg-6 col-md-6 col-sm-12 col-12 align-items-center justify-content-center">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                        <form class="d-flex" [formGroup]="FormGuardar">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-12 pe-1">
                                <div>
                                    <label for="nombre" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Nombre:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <input id="nombre" type="text" class="form-control" placeholder="Nombre" formControlName="nombre" [ngClass]="{ 'is-invalid': Enviado && f['nombre'].errors }"/>
                                        <div *ngIf="Enviado && f['nombre'].errors" class="invalid-feedback">
                                            <div *ngIf="f['nombre'].errors['required']">
                                                El nombre es obligatorio
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="fechaVencimiento" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Fecha Vencimiento:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <input id="fechaVencimiento" type="date" class="form-control" formControlName="fechaVencimiento" [ngClass]="{ 'is-invalid': Enviado && f['fechaVencimiento'].errors }"/>
                                        <div *ngIf="Enviado && f['fechaVencimiento'].errors" class="invalid-feedback">
                                            <div *ngIf="f['fechaVencimiento'].errors['required']">
                                                La fecha de vencimiento es obligatoria
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="precio" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Precio:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <input id="precio" type="number" class="form-control" placeholder="Precio" formControlName="precio" [ngClass]="{ 'is-invalid': Enviado && f['precio'].errors }"/>
                                        <div *ngIf="Enviado && f['precio'].errors" class="invalid-feedback">
                                            <div *ngIf="f['precio'].errors['required']">
                                                El precio es obligatorio
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="proveedor" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Proveedor:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <input id="proveedor" type="text" class="form-control" placeholder="Proveedor" formControlName="proveedor" [ngClass]="{ 'is-invalid': Enviado && f['proveedor'].errors }"/>
                                        <div *ngIf="Enviado && f['proveedor'].errors" class="invalid-feedback">
                                            <div *ngIf="f['proveedor'].errors['required']">
                                                El proveedor es obligatorio
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-12 ps-1">
                                <div>
                                    <label for="fechaCompra" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Fecha Compra:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <input id="fechaCompra" type="date" class="form-control" formControlName="fechaCompra" [ngClass]="{ 'is-invalid': Enviado && f['fechaCompra'].errors }"/>
                                        <div *ngIf="Enviado && f['fechaCompra'].errors" class="invalid-feedback">
                                            <div *ngIf="f['fechaCompra'].errors['required']">
                                                La fecha de compra es obligatoria
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="cantidad" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Cantidad compradas:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <input id="cantidad" type="number" class="form-control" placeholder="Cantidad compradas" formControlName="cantidad" [ngClass]="{ 'is-invalid': Enviado && f['cantidad'].errors }"/>
                                        <div *ngIf="Enviado && f['cantidad'].errors" class="invalid-feedback">
                                            <div *ngIf="f['cantidad'].errors['required']">
                                                Las cantidades compradas son obligatorias
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="porcentaje" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Porcentaje:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <input id="porcentaje" type="number" class="form-control" placeholder="Porcentaje disponible" formControlName="porcentaje" [ngClass]="{ 'is-invalid': Enviado && f['porcentaje'].errors }"/>
                                        <div *ngIf="Enviado && f['porcentaje'].errors" class="invalid-feedback">
                                            <div *ngIf="f['porcentaje'].errors['required']">
                                                El porcentaje es obligatorio
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="idMedida" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                        Medida:
                                    </label>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                        <select id="idMedida" class="form-control" formControlName="idMedida" [ngClass]="{ 'is-invalid': Enviado && f['idMedida'].errors }">
                                            <option *ngFor="let c of Medidas; let i = index" [value]="c.id">
                                                {{ c.nombre }}
                                            </option>
                                        </select>
                                        <div *ngIf="Enviado && f['idMedida'].errors" class="invalid-feedback">
                                            <div *ngIf="f['idMedida'].errors['required']">
                                                La medida es obligatorio
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <hr/>
                        <div class="d-flex col-lg-12 col-md-12 col-sm-12 col-12 align-items-center justify-content-center">
                            <button class="btn btn-success" (click)="Agregar()">
                                AGREGAR A LA LISTA
                            </button>
                            <button *ngIf="MostrarLimpiar" class="btn btn-primary ms-2" (click)="Limpiar()">
                                LIMPIAR
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                    <table class="table table-striped table-hover" id="tablaListaAlmacen">
                        <thead>
                            <tr>
                                <th class="text-center">
                                    Nombre
                                </th>
                                <th class="text-center">
                                    Existentes
                                </th>
                                <th class="text-center">
                                    Precio Compra
                                </th>
                                <th class="text-center">
                                    Editar
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let c of Compras; let j = index">
                                <td class="text-center">
                                    {{ c.nombre }}
                                </td>
                                <td class="text-center">
                                    {{ c.cantidad }}
                                </td>
                                <td class="text-center">
                                    {{ c.precio }}
                                </td>
                                <td class="text-center">
                                    <i class="fa-solid fa-pen" (click)="Editar(j, c)"></i>
                                    &nbsp;
                                    <i class="fa-solid fa-trash" (click)="Eliminar(j)"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="d-flex align-items-center justify-content-center mt-2">
                <div class="spinner-grow text-danger" style="width: 3rem; height: 3rem;" role="status" [hidden]="!Loading">
                    <span class="visually-hidden">
                        Loading...
                    </span>
                </div>
            </div>
        </div>
        <div class="mt-2" *ngIf="!agregar">
            <div class="row">
                <div class="d-flex col-lg-12 col-md-12 col-sm-12 col-12 align-items-center justify-content-center">
                    <form class="d-flex col-lg-12 col-md-12 col-sm-12 col-12 align-items-center justify-content-center" [formGroup]="FormGuardar">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12 pe-1">
                            <div>
                                <label for="nombre" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Nombre:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <input id="nombre" type="text" class="form-control" placeholder="Nombre" formControlName="nombre" [ngClass]="{ 'is-invalid': Enviado && f['nombre'].errors }"/>
                                    <div *ngIf="Enviado && f['nombre'].errors" class="invalid-feedback">
                                        <div *ngIf="f['nombre'].errors['required']">
                                            El nombre es obligatorio
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="fechaVencimiento" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Fecha Vencimiento:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <input id="fechaVencimiento" type="date" class="form-control" formControlName="fechaVencimiento" [ngClass]="{ 'is-invalid': Enviado && f['fechaVencimiento'].errors }"/>
                                    <div *ngIf="Enviado && f['fechaVencimiento'].errors" class="invalid-feedback">
                                        <div *ngIf="f['fechaVencimiento'].errors['required']">
                                            La fecha de vencimiento es obligatoria
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="precio" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Precio:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <input id="precio" type="number" class="form-control" placeholder="Precio" formControlName="precio" [ngClass]="{ 'is-invalid': Enviado && f['precio'].errors }"/>
                                    <div *ngIf="Enviado && f['precio'].errors" class="invalid-feedback">
                                        <div *ngIf="f['precio'].errors['required']">
                                            El precio es obligatorio
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="proveedor" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Proveedor:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <input id="proveedor" type="text" class="form-control" placeholder="Proveedor" formControlName="proveedor" [ngClass]="{ 'is-invalid': Enviado && f['proveedor'].errors }"/>
                                    <div *ngIf="Enviado && f['proveedor'].errors" class="invalid-feedback">
                                        <div *ngIf="f['proveedor'].errors['required']">
                                            El proveedor es obligatorio
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12 ps-1">
                            <div>
                                <label for="fechaCompra" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Fecha Compra:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <input id="fechaCompra" type="date" class="form-control" formControlName="fechaCompra" [ngClass]="{ 'is-invalid': Enviado && f['fechaCompra'].errors }"/>
                                    <div *ngIf="Enviado && f['fechaCompra'].errors" class="invalid-feedback">
                                        <div *ngIf="f['fechaCompra'].errors['required']">
                                            La fecha de compra es obligatoria
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="cantidad" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Cantidad compradas:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <input id="cantidad" type="number" class="form-control" placeholder="Cantidad compradas" formControlName="cantidad" [ngClass]="{ 'is-invalid': Enviado && f['cantidad'].errors }"/>
                                    <div *ngIf="Enviado && f['cantidad'].errors" class="invalid-feedback">
                                        <div *ngIf="f['cantidad'].errors['required']">
                                            Las cantidades compradas son obligatorias
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="porcentaje" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Porcentaje:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <input id="porcentaje" type="number" class="form-control" placeholder="Porcentaje disponible" formControlName="porcentaje" [ngClass]="{ 'is-invalid': Enviado && f['porcentaje'].errors }"/>
                                    <div *ngIf="Enviado && f['porcentaje'].errors" class="invalid-feedback">
                                        <div *ngIf="f['porcentaje'].errors['required']">
                                            El porcentaje es obligatorio
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="idMedida" class="col-lg-12 col-md-12 col-sm-12 col-12 col-form-label">
                                    Medida:
                                </label>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                    <select id="idMedida" class="form-control" formControlName="idMedida" [ngClass]="{ 'is-invalid': Enviado && f['idMedida'].errors }">
                                        <option *ngFor="let c of Medidas; let i = index" [value]="c.id">
                                            {{ c.nombre }}
                                        </option>
                                    </select>
                                    <div *ngIf="Enviado && f['idMedida'].errors" class="invalid-feedback">
                                        <div *ngIf="f['idMedida'].errors['required']">
                                            La medida es obligatorio
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="d-flex align-items-center justify-content-center mt-2">
                <div class="spinner-grow text-danger" style="width: 3rem; height: 3rem;" role="status" [hidden]="!Loading">
                    <span class="visually-hidden">
                        Loading...
                    </span>
                </div>
            </div>
        </div>
        <hr/>
        <div class="d-flex align-items-end justify-content-end mt-2">
            <button class="btn btn-danger" (click)="Salir()">
                REGRESAR
            </button>
            <button class="btn btn-success ms-2" (click)="Guardar()">
                GUARDAR
            </button>
        </div>
    </div>
</div>
